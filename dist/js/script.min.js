$((function(){function e(e){$(e).validate({rules:{name:"required",phone:{requiredphone:!0,minlenghtphone:!0},email:{required:!0,email:!0},socials:"required",specialization:"required",complaint_message:"required",new_password:{required:!0,minlength:8},confirm_password:{required:!0,equalTo:"#new_password"}},submitHandler:function(){$(".register-popup__bonuses-btn").addClass("register-popup__bonuses-btn--success"),$(".register-popup__content-inner").hide(),$(".register-popup__success").show(),$(".change-password__main").hide(),$(".change-password__success").show()}})}function t(e){this.type=e}$("input[name=price-range]").ionRangeSlider({type:"double",grid:!1,min:0,max:99999,from:0,to:99999}),$("input[name=duration-range]").ionRangeSlider({type:"double",grid:!1,min:30,max:180,from:30,to:180}),$(".aside-filters__more-btn").on("click",(function(){$(this).hide(),$(this).next().slideDown("300")})),$(".filter-btn").on("click",(function(){$(".aside-filters").addClass("aside-filters--active")})),$(".aside-filters__close-btn").on("click",(function(){$(".aside-filters").removeClass("aside-filters--active")})),$(".card__favorite-btn").on("click",(function(e){$(this).parent().parent().parent().toggleClass("favorite")})),$(".card__delete-btn").on("click",(function(){$(this).parent().parent().parent().siblings().find("div.delete-box").fadeIn("300")})),$(".delete-box__btn").on("click",(function(){$(".delete-box").fadeOut("300")})),$(".executor-card__icons-more").hover((function(){$(this).next().fadeToggle("slow")})),$(".card__question-btn").hover((function(){$(this).next().fadeToggle("300")})),$(".promo__favorite-btn").on("click",(function(){$(this).toggleClass("promo__favorite-btn--active")})),$(".about-event__more").on("click",(function(){$(this).hide(),$(this).next().slideDown("300")})),$(".reviews__more").on("click",(function(){$(this).hide(),$(this).next().slideDown("300")})),$(".popup-link").fancybox(),ymaps.ready((function(){if("undefined"==typeof ymaps)return;const e=new ymaps.Map("map",{center:[59.941961,30.349498],zoom:17},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark(e.getCenter(),{balloonContent:"\n\t\t\t\t\t\t\n\t\t\t\t\t\t"},{iconLayout:"default#image",iconImageHref:"./img/icons/location.svg",iconImageSize:[42,56]});e.geoObjects.add(t),e.behaviors.disable("scrollZoom"),$(".event-info__address-map").fancybox({height:600,afterShow:function(){const t=new ymaps.Map("popup-map",{center:[59.941961,30.349498],zoom:15,behaviors:["scrollZoom","drag"]});popupMapPlacemark=new ymaps.Placemark(e.getCenter(),{balloonContent:"\n\t\t\t\t\t\t\n\t\t\t\t\t\t"},{iconLayout:"default#image",iconImageHref:"./img/icons/location.svg",iconImageSize:[42,56]}),t.geoObjects.add(popupMapPlacemark)}})})),$(".gallery-slider").slick({slidesToShow:1,slidesToScroll:1,nextArrow:'<button class="gallery-slider__btn"><svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 19L10 10L0.999999 1" stroke="none" stroke- width="2" stroke - linecap="round" stroke - linejoin="round" /></svg></button>',fade:!0,asNavFor:".gallery-thumbs",responsive:[{breakpoint:575,settings:{arrows:!1,fade:!1,centerPadding:50,asNavFor:!1}}]}),$(".gallery-thumbs").slick({slidesToShow:5,slidesToScroll:1,arrows:!1,asNavFor:".gallery-slider",focusOnSelect:!0,variableWidth:!0}),$('[data-fancybox="gallery"]').fancybox(),$("#enter").on("click",(function(){$(".questionary-form__register").hide(),$(".questionary-form__enter").show()})),$("#register").on("click",(function(){$(".questionary-form__enter").hide(),$(".questionary-form__register").show()})),$("#forgot-password").on("click",(function(){$(this).hide(),$(this).parent().removeClass("questionary-form__action--sb"),$(".password-recovery").show()})),$(".password-recovery__close").on("click",(function(){$(this).parent().hide()})),$(".password-recovery__form-btn").on("click",(function(){$(this).parent().hide(),$(".password-recovery__info-text").hide(),$(".password-recovery__title").after('<p class="password-recovery__success">На электронный адрес <span class="recovery-email"></span> было отправлено письмо со ссылкой для смены пароля</p>');var e=$(".password-recovery__form-input").val();$(".recovery-email").text(e)})),$(".tab").on("click",(function(e){e.preventDefault(),$($(this).siblings()).removeClass("tab--active"),$(".tabs-content").removeClass("tabs-content--active"),$(this).addClass("tab--active"),$($(this).attr("href")).addClass("tabs-content--active")})),$(".accordion__item-head").on("click",(function(){$(this).parent().siblings().find(".accordion__item-content").slideUp("300"),$(this).parent().siblings().find(".accordion__item-head").removeClass("accordion__item-head--active"),$(this).next().slideToggle("300"),$(this).toggleClass("accordion__item-head--active")})),$(".questionary-form__item-title--drop").on("click",(function(){$(this).next().slideToggle("300"),$(this).toggleClass("questionary-form__item-title--active")})),$(window).on("resize",(function(e){var t=$(".my-study__cards").data("init-slider");window.innerWidth<575?1!=t&&$(".my-study__cards").slick({arrows:!1,dots:!0}).data({"init-slider":1}):1==t&&$(".my-study__cards").slick("unslick").data({"init-slider":0})})).trigger("resize"),$.validator.addMethod("minlenghtphone",(function(e,t){return e.replace(/\D+/g,"").length>10})),$.validator.addMethod("requiredphone",(function(e,t){return e.replace(/\D+/g,"").length>1})),e("#register-popup form"),e("#speaker-popup form"),e("#complain-popup form"),e("#change-password"),$(".register-popup__bonuses-btn").on("click",(function(){var e=$(".bill-amount").text(),t=$("#bonus-amount");return t.val()>e?(t.addClass("register-popup__bonuses-input--invalid"),$(".register-popup__bonuses-wrap").after('<span class="bonus-error">Недостаточно</span>')):(t.removeClass("register-popup__bonuses-input--invalid"),$(".bonus-error").hide(),$(".register-popup__bonuses-btn").addClass("register-popup__bonuses-btn--success"),$(".register-popup__bonuses-btn").text("Списано")),!1})),$(".password-recovery__form-btn").on("click",(function(e){e.preventDefault()})),$("#register-popup form").submit((function(e){e.preventDefault();var t=$(".register-popup__form-input[name=name]").val(),n=$(".register-popup__form-input[name=phone]").val(),i=$(".register-popup__form-input[name=email]").val(),o=$(".register-popup__bonuses-input[name=bonus]").val();$.ajax({type:"POST",url:"/register.php",data:{name:t,phone:n,email:i,bonus:o}}),$(this).find("input").val(""),$("form").trigger("reset")})),$("#speaker-popup form").submit((function(e){e.preventDefault();var t=$(".register-popup__form-input[name=name]").val(),n=$(".register-popup__form-input[name=phone]").val(),i=$(".register-popup__form-input[name=email]").val(),o=$(".register-popup__bonuses-input[name=bonus]").val(),r=$(".speaker-popup__form-input[name=socials]").val(),s=$(".speaker-popup__form-input[name=specialization]").val(),a=$(".speaker-popup__form-input[name=experience]").val(),c=$(".speaker-popup__form-textarea[name=question]").val(),p=$(".popup__form-file").val();$.ajax({type:"POST",url:"/speaker-register.php",data:{name:t,phone:n,email:i,bonus:o,socials:r,specialization:s,experience:a,file:p,question:c}}),$(this).find("input").val(""),$("form").trigger("reset"),$.fancybox.close($("#speaker-popup"))})),$("#copmlain-popup form").submit((function(e){e.preventDefault();var t=$("#complaint_message").val();$.ajax({type:"POST",url:"/complain.php",data:{complaint_message:t}}),$(this).find("textarea").val(""),$("form").trigger("reset")})),$("#change-password").submit((function(e){e.preventDefault();var t=$("input[name=new_password]").val();$.ajax({type:"POST",url:"/complain.php",data:{new_password:t},success:function(){$(".change-password__main").fadeOut("slow"),$(".change-password__success").fadeIn("slow")}}),$(this).find("input").val(""),$("form").trigger("reset")})),$(".executor-choice__form").submit((function(e){e.preventDefault(),$.fancybox.close($("#executor-choice")),$.fancybox.open($("#executor-success"))})),$(".executor-success__btn").on("click",(function(){$.fancybox.close($("#executor-success"))})),$(".register-popup__success-btn").on("click",(function(){$.fancybox.close(),$(".register-popup__success").hide(),$(".register-popup__content-inner").show(),$(".register-popup__bonuses-btn").removeClass("register-popup__bonuses-btn--success"),$(".register-popup__bonuses-btn").text("Списать")})),$.fn.setCursorPosition=function(e){if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(e,e);else if($(this).get(0).createTextRange){var t=$(this).get(0).createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}},$("input[name=phone]").click((function(){$(this).setCursorPosition(4)})).mask("+7 (999) 999-99-99"),t.prototype.init=function(){const e=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],n=t.dataset.da.trim().split(","),i={};i.element=t,i.parent=t.parentNode,i.destination=document.querySelector(n[0].trim()),i.breakpoint=n[1]?n[1].trim():"767",i.place=n[2]?n[2].trim():"last",i.index=this.indexInParent(i.parent,i.element),this.оbjects.push(i)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,n){return Array.prototype.indexOf.call(n,e)===t}));for(let t=0;t<this.mediaQueries.length;t++){const n=this.mediaQueries[t],i=String.prototype.split.call(n,","),o=window.matchMedia(i[0]),r=i[1],s=Array.prototype.filter.call(this.оbjects,(function(e){return e.breakpoint===r}));o.addListener((function(){e.mediaHandler(o,s)})),this.mediaHandler(o,s)}},t.prototype.mediaHandler=function(e,t){if(e.matches)for(let e=0;e<t.length;e++){const n=t[e];n.index=this.indexInParent(n.parent,n.element),this.moveTo(n.place,n.element,n.destination)}else for(let e=0;e<t.length;e++){const n=t[e];n.element.classList.contains(this.daClassname)&&this.moveBack(n.parent,n.element,n.index)}},t.prototype.moveTo=function(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.insertAdjacentElement("beforeend",t):"first"!==e?n.children[e].insertAdjacentElement("beforebegin",t):n.insertAdjacentElement("afterbegin",t)},t.prototype.moveBack=function(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},t.prototype.indexInParent=function(e,t){const n=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(n,t)},t.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))};new t("max").init(),$("#reserved-sum").text($(".executor-choice__price").find("span").text()),$(".chat__executor-name").text($("#executor-firstname").text()),$(".chosen-executor__name").text($("#executor-firstname").text()+" "+$("#executor-secondname").text()),$(".filter-style").styler()}));